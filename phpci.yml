build_settings:
    clone_depth: 1 # depth of 1 is a shallow clone, remove this line to clone entire repo
    ignore:
        - "vendor"
        - "tests"
    mysql:
        host: "localhost"
        user: "root"
        pass: "U9jAgD1N8e"

setup:
    mysql:
        - "DROP DATABASE IF EXISTS cyberworks;"
        - "CREATE DATABASE cyberworks;"
        - "GRANT ALL PRIVILEGES ON cyberworks.* TO cyberworks@'localhost' IDENTIFIED BY 'cyberworks';"
    composer:
        action: "install"

test:
    php_unit:
        config:
            - "phpunit.xml"
        directory:
            - "tests/"
        run_from: "phpunit/"
        coverage: "tests/logs/coverage"
    php_mess_detector:
        path: "app"
        allow_failures: true
    php_code_sniffer:
        path: "app"
        standard: "PSR2"
    php_cpd:
        standard: "PSR2"
        path: "app"
        allow_failures: true
    codeception:
        allow_failures: false
        config: "codeception.yml"
        path: "tests/_output/"
        args: "report.xml --no-ansi --coverage-html"
    php_docblock_checker:
        path: app

complete:
    mysql:
        host: "localhost"
        user: "root"
        pass: "U9jAgD1N8e"
        - "DROP DATABASE IF EXISTS cyberworks;"